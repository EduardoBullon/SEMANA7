<% 
const title = 'Inicio - Auth App';
const user = null; // Check if user is passed from route
%>

<%- include('partials/header', { title, user }) %>

<div class="row">
    <div class="col s12 center-align">
        <h2>
            <i class="material-icons large blue-text">security</i>
            Bienvenido a Auth App
        </h2>
        <p class="flow-text grey-text">
            Sistema de autenticación con roles y gestión de usuarios
        </p>
    </div>
</div>

<div class="row">
    <% if (typeof user !== 'undefined' && user) { %>
        <!-- User is authenticated -->
        <div class="col s12 center-align">
            <div class="card-panel green lighten-4 green-text text-darken-2">
                <h5>¡Hola, <%= user.name %>!</h5>
                <p>Ya tienes una sesión activa.</p>
            </div>
        </div>
        
        <div class="col s12 m6 center-align">
            <% if (user.roles && user.roles.includes('admin')) { %>
                <a href="/dashboard/admin" class="btn-large green waves-effect waves-light">
                    <i class="material-icons left">admin_panel_settings</i>
                    Dashboard Admin
                </a>
            <% } else { %>
                <a href="/dashboard/user" class="btn-large green waves-effect waves-light">
                    <i class="material-icons left">dashboard</i>
                    Mi Dashboard
                </a>
            <% } %>
        </div>
        
        <div class="col s12 m6 center-align">
            <a href="/profile" class="btn-large green waves-effect waves-light">
                <i class="material-icons left">person</i>
                Mi Perfil
            </a>
        </div>
    <% } else { %>
        <!-- User is not authenticated -->
        <div class="col s12 m6 center-align">
            <div class="card">
                <div class="card-content">
                    <i class="material-icons large blue-text">login</i>
                    <h5>Iniciar Sesión</h5>
                    <p>Accede a tu cuenta existente</p>
                </div>
                <div class="card-action">
                    <a href="/signin" class="btn green waves-effect waves-light">Iniciar Sesión</a>
                </div>
            </div>
        </div>
        
        <div class="col s12 m6 center-align">
            <div class="card">
                <div class="card-content">
                    <i class="material-icons large green-text">person_add</i>
                    <h5>Registrarse</h5>
                    <p>Crea una nueva cuenta</p>
                </div>
                <div class="card-action">
                    <a href="/signup" class="btn green waves-effect waves-light">Registrarse</a>
                </div>
            </div>
        </div>
    <% } %>
</div>

<div class="row">
    <div class="col s12">
        <div class="card">
            <div class="card-content">
                <span class="card-title">
                    <i class="material-icons left">info</i>
                    Características del Sistema
                </span>
                <div class="row">
                    <div class="col s12 m4">
                        <div class="center-align">
                            <i class="material-icons large green-text">security</i>
                            <h6>Autenticación Segura</h6>
                            <p>JWT tokens y contraseñas encriptadas</p>
                        </div>
                    </div>
                    <div class="col s12 m4">
                        <div class="center-align">
                            <i class="material-icons large green-text">admin_panel_settings</i>
                            <h6>Control de Roles</h6>
                            <p>Gestión de permisos por rol de usuario</p>
                        </div>
                    </div>
                    <div class="col s12 m4">
                        <div class="center-align">
                            <i class="material-icons large orange-text">person</i>
                            <h6>Perfil de Usuario</h6>
                            <p>Gestión completa de datos personales</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<%- include('partials/footer') %>